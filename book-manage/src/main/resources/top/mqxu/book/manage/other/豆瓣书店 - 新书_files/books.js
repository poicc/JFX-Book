!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=26)}([function(t,e,n){"use strict";e.a=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object.assign({},t);return n&&Object.keys(r).map(function(t){void 0!==r[t]&&null!==r[t]||delete r[t]}),Object.keys(r).map(function(t){return e?t+"="+encodeURIComponent(r[t]):t+"="+r[t]}).join("&")}},,,function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=(n(4),n(5)),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a={target:"#cartCount",source:"book"},s=function(){function t(e){r(this,t),this.config=Object.assign({},a,e),this.init()}return o(t,[{key:"init",value:function(){var t=this;if(!window._IS_LOGIN)return null;var e=this.config,n=e.target,r=e.source;this.target=$(n),i.a.get("/api/v2/cart/quantity",{source:r}).then(function(e){t.target.html(e.data.quantity),t.target.addClass("has-count")})}}]),t}();e.a=s},function(t,e,n){},function(t,e,n){"use strict";function r(t){if(!u.indexOf(t)<0)throw new Error("method error,it must one of:"+u.join(","));return function(e,n,r,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"json",d=arguments.length>6&&void 0!==arguments[6]&&arguments[6],p=Object(s.a)(e);r&&Object.keys(r).map(function(t){var e=new RegExp(":"+t,"gi");p=p.replace(e,r[t])});var y=Object.assign({},f,o);"[object FormData]"===Object.prototype.toString.call(n)&&delete y["Content-Type"],"get"===t&&(p=Object(s.b)(p,n,!0));var v={method:t.toUpperCase(),headers:y,mode:a.mode,credentials:a.credentials,cache:a.cache};"get"!==t&&"head"!==t&&(y["Content-Type"]==c.json?v.body=JSON.stringify(n):v.body=i(n));var b=new Request(p,v);return fetch(b).then(function(t){return d||204===t.status?t:l.indexOf(u)>=0?t[u]():t.json()})}}function i(t){return"[object Object]"===Object.prototype.toString.call(t)?Object(a.a)(t,!1,!0):t}var o=n(6),a=(n.n(o),n(0)),s=n(7),u=["post","get","put","delete"],c={form:"application/x-www-form-urlencoded; charset=UTF-8",json:"application/json; charset=utf-8"},f={Accept:"application/json","Content-Encoding":"gzip","Content-Type":c.json},l=["text","json","blob","arrayBuffer","formData"],h={mode:"cors",credentials:"include",cache:"no-cache"};e.a={get:r("get"),post:r("post"),put:r("put"),delete:r("delete")}},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return b.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(b.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(b.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(b.arrayBuffer&&b.blob&&m(t))this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!b.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!w(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):b.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},b.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var n=e.body;if(t instanceof d){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function y(t){var e=new i;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function v(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var b={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(b.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},w=ArrayBuffer.isView||function(t){return t&&g.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},b.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this,{body:this._bodyInit})},l.call(d.prototype),l.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var T=[301,302,303,307,308];v.redirect=function(t,e){if(-1===T.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=d,t.Response=v,t.fetch=function(t,e){return new Promise(function(n,r){var i=new d(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:y(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new v(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials?o.withCredentials=!0:"omit"===i.credentials&&(o.withCredentials=!1),"responseType"in o&&b.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.split("?").shift(),a=i(t),s=Object.assign(a,e);return r+"?"+Object(o.a)(s,n)}function i(t,e){for(var n=t.indexOf("?")>0?t.split("?").pop():window.location.search.substring(1),r=n.split("&"),i={},o=0,a=r.length;o<a;o++){var s=r[o].split("=");if(e&&s[0]===e)return s[1];s[0]&&(i[s[0]]=s[1])}return e&&!Object.keys(params).includes(e)?null:i}e.b=r,n.d(e,"a",function(){return a});var o=n(0),a=function(t){var e=t,n=window._MARKET_API_BASE_URI;if(e.startsWith("/api/")&&!/\/admin\//gi.test(e)){var r="https://market.douban.com/api/";void 0!==n&&(r=n),e=e.replace("/api/",r)}return e}},,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),i=(n.n(r),n(28)),o=(n.n(i),n(29)),a=n(30),s=n(3),u={tabId:".nav-item a",tips:".nav-right span"},c=(new o.a(u),{container_id:"paginator",current:window._CONFIG?window._CONFIG.page:1,total:window._CONFIG?window._CONFIG.total:0,page_size:window._CONFIG?window._CONFIG.page_size:20});new a.a(c),new s.a},function(t,e){},function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){n(this,t),this.config=e,this.e={total:e.total},this.total=e.total}return r(t,[{key:"on",value:function(t,e){var n=this.events=this.events||{};n[t]=n[t]||{},n[t][e]=e}},{key:"off",value:function(t,e){var n=this.events=this.events||{};void 0!==e?n[t]&&n[t][e]&&delete n[t][e]:delete n[t]}},{key:"fire",value:function(t,e){var n=this.events=this.events||{};if(n[t]){var r=n[t];for(var i in r)r[i]instanceof Function&&r[i](e)}}},{key:"mix",value:function(t,e){for(var n in e)t[n]=e[n];return t}},{key:"toggle",value:function(t){var e=this;e.fire("beforeToggle",this.mix({type:"beforeToggle"},this.e)),e.e.oldCurrent=this.e.current,e.e.current=t,e.fire("afterToggle",this.mix({type:"afterCurrent"},this.e));var n=this.config.imgs[t].dataset.url,r=this.config.imgs[t].dataset.img,i=[r,n,t+1].join("-");ga("send","event","纸书聚合页","Banner展现",i)}},{key:"next",value:function(){!this.config.loop&&this.e.current>this.config.total||(this.e.current<this.config.total-1?this.toggle(this.e.current- -1):this.toggle(0))}},{key:"prev",value:function(){(this.config.loop||0!=this.e.current)&&(this.e.current>0?this.toggle(this.e.current-1):this.toggle(this.config.total-1))}},{key:"add",value:function(t){this.config.total+=t-0}},{key:"getTotal",value:function(){return this.config.total}},{key:"getCurrent",value:function(){return this.e.current}},{key:"setCurrent",value:function(t){this.e.current=t}}]),t}(),o=$("#slide_box"),a=o.find("div.img"),s=o.find("a.thumb"),u=new i({imgs:a,total:a.length,loop:1}),c={};u.on("afterToggle",function(t){if(a[t.oldCurrent]){var e=a.eq(t.oldCurrent);e.removeClass("current").addClass("oldCurrent"),e.stop(1,1).animate({opacity:0},"slow",function(){e.removeClass("oldCurrent")}),s.eq(t.oldCurrent).removeClass("current")}var n=a.eq(t.current);n.addClass("current"),n.stop(1,1).animate({opacity:1},"slow"),s.eq(t.current).addClass("current")}),a.each(function(t){var e=s.eq(t);u.toggle(t),e.on("mouseenter",function(){clearTimeout(c[1]),clearTimeout(c[2]),clearTimeout(c[3]),clearTimeout(c[4]),c[5]=setTimeout(function(){u.toggle(t)},200),ga("send","event","纸书聚合页","Banner悬停",t+1)}),e.on("mouseleave",function(){c[1]=setTimeout(function t(){u.next(),c[2]=setTimeout(t,3e3)},1500),clearTimeout(c[5])}),a.eq(t).on("click",function(){var e=$(this).data("url"),n=$(this).data("img"),r=($(this).data("location"),[n,e,t+1].join("-"));createFunctionWithTimeout(function(){window.open(e)}),ga("send","event","纸书聚合页","Banner点击",r)})}),u.toggle(0),c[3]=setTimeout(function t(){u.next(),c[4]=setTimeout(t,3e3)},3e3)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this.config=e,this.init()}return i(t,[{key:"init",value:function(){this.urlJump(),this.clickTips()}},{key:"getUrlParam",value:function(t){var e,n;return e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(e),null===n?null:decodeURI(n[2])}},{key:"urlJump",value:function(){var t=this.config,e=location.origin;window.location.protocol,window.location.host,$(document).on("click",t.tabId,function(t){var n=$(t.currentTarget);"readbook_tab"==$(n).attr("id")?(createFunctionWithTimeout(function(){window.location.href=e+"/book/?type=topic"}),ga("send","event","纸书聚合页","标签点击","主题")):"annualbook_tab"==$(n).attr("id")?(createFunctionWithTimeout(function(){window.location.href=e+"/book/?type=annual"}),ga("send","event","纸书聚合页","标签点击","榜单")):"activity_tab"==$(n).attr("id")?(createFunctionWithTimeout(function(){window.location.href=e+"/book/?type=activity"}),ga("send","event","纸书聚合页","标签点击","活动")):(createFunctionWithTimeout(function(){window.location.href=e+"/book/"}),ga("send","event","纸书聚合页","标签点击","新书"))})}},{key:"clickTips",value:function(){var t=this.config;$(document).on("click",t.tips,function(t){var e=$(t.currentTarget),n=$(e).html(),r=location.origin;createFunctionWithTimeout(function(){window.location.href=r+"/book?type=article&article_category="+n}),ga("send","event","纸书聚合页","标签点击",n)});var e=this.getUrlParam("article_category");$(".nav-right").find("span."+e).addClass("current")}}]),t}();e.a=o},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(31),a=n.n(o),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u={container_id:null,current:1,total:0,page_size:20,distance:4,previous_page:"&laquo;前页",next_page:"后页&raquo;",hidden_when_only_one:!0,use_ajax:!1,link:window.location.href,page_param:"page",page_num_param:"page_num"},c=function(){function t(e){i(this,t),this.config=Object.assign({},u,e),this.init()}return s(t,[{key:"init",value:function(){var t=this.config;this.count=t.page_size?Math.ceil(t.total/t.page_size):0,t.hidden_when_only_one&&this.count<2||(this.distance_start=t.current>2*t.distance+2,this.distance_end=this.count-t.current>2*t.distance+1,this.has_next=t.current<this.count,this.has_previous=t.current>1,this.has_other_pages=this.has_next||this.has_previous,this.next_page_number=this.has_next?t.current+1:this.count,this.previous_page_number=this.has_previous?t.current-1:1,this.index_start=this.distance_start?Math.min(t.current-t.distance,this.count-2*t.distance):1,this.index_end=this.distance_end?Math.max(t.current+t.distance,2*t.distance+1):this.count+1,this.render())}},{key:"jumpPage",value:function(t){this.config.current=t,this.init()}},{key:"render",value:function(){var t=this.config,e=document.getElementById(t.container_id),n='<a class="item" '+this.renderLink(1)+'>1</a>\n                                <a class="item" '+this.renderLink(2)+'>2</a>\n                                <a class="item unavailable no-border"  >...</a>',r='<a class="item unavailable no-border" >...</a>\n                              <a class="item" '+this.renderLink(this.count)+">"+this.count+"</a>",i=this.renderPrev()+""+(this.distance_start?n:"")+this.renderDistance()+(this.distance_end?r:"")+this.renderNext();e.innerHTML=i}},{key:"renderDistance",value:function(){for(var t=this.config,e="",n=this.index_start;n<this.index_end;n++)e+=t.current==n?'<a class="item current">'+n+"</a>":'<a class="item" '+this.renderLink(n)+">"+n+"</a>";return e}},{key:"renderPrev",value:function(){if(!this.has_previous)return"";var t=this.config;return'<a class="'+a()("item","arrow",{unavailable:this.has_previous})+'" '+this.renderLink(this.previous_page_number)+">"+t.previous_page+"</a>"}},{key:"renderNext",value:function(){if(!this.has_next)return"";var t=this.config;return'<a class="'+a()("item","arrow",{unavailable:this.has_next})+'" '+this.renderLink(this.next_page_number)+">"+t.next_page+"</a>"}},{key:"renderLink",value:function(t){var e;if(!t)return"  ";var n=this.config,i=n.link,o=(e={},r(e,n.page_param,t),r(e,n.page_num_param,n.page_size),e);return i.indexOf("?")>0?Object.keys(o).forEach(function(t,e){var n=new RegExp(t+"=(\\w+)&?");i=n.test(i)?i.replace(n,t+"="+o[t]+"&"):i+"&"+t+"="+o[t]}):i=i+"?"+Object.keys(o).map(function(t){return t+"="+o[t]}).join("&"),n.use_ajax?' data-href="'+i+'" ':' href="'+i+'" data-href="'+i+'"  '}}]),t}();e.a=c},function(t,e,n){var r,i;!function(){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var i=typeof r;if("string"===i||"number"===i)t.push(r);else if(Array.isArray(r)&&r.length){var a=n.apply(null,r);a&&t.push(a)}else if("object"===i)for(var s in r)o.call(r,s)&&r[s]&&t.push(s)}}return t.join(" ")}var o={}.hasOwnProperty;void 0!==t&&t.exports?(n.default=n,t.exports=n):(r=[],void 0!==(i=function(){return n}.apply(e,r))&&(t.exports=i))}()}]);